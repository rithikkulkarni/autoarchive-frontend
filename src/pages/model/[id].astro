---
export const prerender = false;

import ModelPriceChart from "../../components/ModelPriceChart.jsx";
import { getModelCard, getPriceHistory } from "../../lib/api.js";

const { id } = Astro.params;

const card = await getModelCard(id);
const history = await getPriceHistory(id, 26);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{card.year} {card.make} {card.model}</title>
  </head>

  <body style="background:#0b0f17;color:white;font-family:system-ui;">
    <div style="max-width:1100px;margin:0 auto;padding:40px 16px;">
      <h1 style="margin-bottom:8px;">
        {card.year} {card.make} {card.model}{card.trim && ` (${card.trim})`}
      </h1>

      <div style="opacity:0.7;margin-bottom:28px;">
        {card.canonicalKey}
      </div>

      <ModelPriceChart history={history} client:load />
    </div>
  </body>
</html>
